---
title: '–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å Watchtower'
summary: '–ü–æ–ª—É—á–∞—é —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ä–∞–∑–ª–∏–≤–µ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —á–∞—Ç Telegram'
publishedAt: '2025-07-21'
tags: docker, devops, watchtower, automation
projects: guryn.ru, skim
---

–ö–æ–≥–¥–∞ –Ω–∞—á–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Watchtower, —è –∑–∞—Ö–æ—Ç–µ–ª –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ –º–æ–π —Å–∞–π—Ç —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω.

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º–µ—Ç–æ–∫ –¥–ª—è Watchtower –µ—Å—Ç—å [–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã](https://containrrr.dev/watchtower/lifecycle-hooks/), –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

- `pre-check` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞;
- `pre-update` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è;
- `post-update` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞;
- `post-check` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ü–∏–∫–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–Ø –∏—Å–ø–æ–ª—å–∑—É—é `post-update`, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –æ —Ç–æ–º, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —Å –∫–æ—Ç–æ—Ä—ã–º –∏–¥–µ—Ç —Ä–∞–±–æ—Ç–∞, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–º–µ–µ—Ç –Ω—É–∂–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏–∑ –Ω–µ–≥–æ.

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–†–∞—Å—Å–∫–∞–∂—É –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –º–æ–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Å —Å–∞–π—Ç–æ–º.

<FilesStructure
  structure={{
    name: 'guryn.ru',
    subitems: [
      { name: 'docker-compose.yml' },
      { name: '.env' },
      {
        name: 'scripts',
        subitems: [{ name: 'on-run-notify.sh' }],
      },
    ],
  }}
/>

–í –ø–∞–ø–∫–µ `scripts` –ª–µ–∂–∏—Ç —Ñ–∞–π–ª `on-run-notify.sh`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:

```bash
#!/bin/sh

message="üöÄ guryn.ru is deployed"

wget --quiet \
     --header="Content-Type: application/x-www-form-urlencoded" \
     --post-data="parse_mode=Markdown&message=$message" \
     https://notify.bot.codex.so/u/AAAABBBBCCCC
```

–í –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —è –∏—Å–ø–æ–ª—å–∑—É—é [@codex_bot](https://t.me/codex_bot) –∏ –µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ [Notify](https://github.com/codex-bot/notify). –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram —á–µ—Ä–µ–∑ HTTP-–∑–∞–ø—Ä–æ—Å—ã.

–î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –ª—é–±–æ–π —á–∞—Ç –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –µ–º—É –∫–æ–º–∞–Ω–¥—É. –û–Ω –≤ –æ—Ç–≤–µ—Ç –ø—Ä–∏—à–ª–µ—Ç –≤–∞–º —Å—Å—ã–ª–∫—É, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Å–∫—Ä–∏–ø—Ç.

```
/notify_start@codex_bot
```

<ChatMockup
  chatTitle="Codex Bot"
  messages={[
    {
      role: 'user',
      message: {
        text: '/notify_start@codex_bot',
      },
      date: '2025-07-21T12:00:00Z',
    },
    {
      role: 'assistant',
      message: {
        text: `Use this webhook for sending notifications to the chat:

\`https://notify.bot.codex.so/u/AAABBCCC\`

Make a POST request with text in ¬´message¬ª param.`,
reactions: [{ emoji: 'üëç', count: 1 }],
},
date: '2025-07-21T12:00:00Z',
},
]}
actionButtons={[
{
label: '–û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç —Å –±–æ—Ç–æ–º',
url: 'https://t.me/codex_bot',
type: 'primary',
},
]}
/>

–¢–µ–ø–µ—Ä—å —Å–¥–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x scripts/on-run-notify.sh
```

–ò –¥–æ–±–∞–≤–∏–º –µ–≥–æ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Å–∞–π—Ç–æ–º. –í —Ñ–∞–π–ª–µ `docker-compose.yml` –¥–æ–±–∞–≤—å—Ç–µ –≤ `volumes` –ø–∞–ø–∫—É —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏, –∞ —Ç–∞–∫–∂–µ —É–∫–∞–∂–∏—Ç–µ –≤—Ç–æ—Ä—É—é –º–µ—Ç–∫—É –¥–ª—è Watchtower:

```yaml
services:
  web:
    labels:
      # traefik labels
      # ...
      - com.centurylinklabs.watchtower.enable=true
      - com.centurylinklabs.watchtower.lifecycle.post-update=/scripts/on-run-notify.sh
    image: ghcr.io/talyguryn/guryn.ru:latest
    restart: unless-stopped
    volumes:
      - ./scripts:/scripts
    env_file:
      - .env
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
docker compose down
docker compose up -d
```

–ò –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
docker compose exec -ti web /scripts/on-run-notify.sh
```

–ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram, —Ç–æ –≤—Å–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ Watchtower —Å–∞–º –æ–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

<ChatMockup
  chatTitle="Codex Bot"
  messages={[
    {
      role: 'assistant',
      message: {
        text: `‚Å†üöÄ [guryn.ru](https://guryn.ru) is deployed`,
        reactions: [{ emoji: 'üî•', count: 1 }],
      },
      date: '2025-07-21T13:00:00Z',
    },
  ]}
/>

## –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø—Ä–µ–≤—å—é —Å–∞–π—Ç–∞

–Ø —É—Å–ª–æ–∂–Ω–∏–ª —Å–∫—Ä–∏–ø—Ç, —á—Ç–æ–±—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –±—ã–ª –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç, –∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ —Å –ø—Ä–µ–≤—å—é —Å–∞–π—Ç–∞. –≠—Ç–æ —á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —É –≤–∞—Å —Å–∞–π—Ç –∏–∑ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å—Ä–∞–∑—É –≤–∏–¥–µ—Ç—å, –∫–∞–∫ –æ–Ω –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

<ChatMockup
  chatTitle="Codex Bot"
  messages={[
    {
      role: 'assistant',
      message: {
        text: `‚Å†üöÄ [guryn.ru](https://guryn.ru) is deployed`,
        cover: 'https://skim.fotofot.ru/?format=png&url=https://guryn.ru',
      },
      date: '2025-07-21T13:00:00Z',
    },
  ]}
/>

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–≤—å—é –∏–∑ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —è –Ω–∞–ø–∏—Å–∞–ª –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å [Skim](https://github.com/talyguryn/skim). –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –∞–¥—Ä–µ—Å –µ—â–µ –º–æ–∂–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å—Å—è. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –Ω–∞ –º–æ–µ–º —Å–∞–π—Ç–µ.

–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–∫—Ä–∏–ø—Ç–∞ `on-run-notify.sh` –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```bash
#!/bin/sh

sleep 5

# Generate current timestamp
timestamp=$(date +%s)

# Create the link with the timestamp
generated_link="https://skim.fotofot.ru/?format=png&url=https://guryn.ru&t=$timestamp"

# Create the message with Markdown link
message="[‚Å†]($generated_link)üöÄ guryn.ru is deployed"

# URL-encode the message
encoded_message=$(node -e "console.log(encodeURIComponent(process.argv[1]))" "$message")

wget --quiet \
     --header="Content-Type: application/x-www-form-urlencoded" \
     --post-data="parse_mode=Markdown&message=$encoded_message" \
     https://notify.bot.codex.so/u/AAAABBBBCCCC
```

–î–æ–±–∞–≤–∏–ª –æ–∂–∏–¥–∞–Ω–∏–µ –≤ 5 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã –¥–∞—Ç—å –≤—Ä–µ–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–∞–π—Ç–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É.

–ú—ã —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –±—É–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø—Ä–µ–≤—å—é —Å–∞–π—Ç–∞, –¥–æ–±–∞–≤–ª—è–µ–º –∫ –Ω–µ–π —Ç–µ–∫—É—â–∏–π —Ç–∞–π–º—Å—Ç–∞–º–ø, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram —Å —ç—Ç–æ–π —Å—Å—ã–ª–∫–æ–π.

–í —Ç–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Markdown –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –ø—Ä–µ–≤—å—é –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –≤ –≤–∏–¥–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏. –ê –≤ —Ç–µ–∫—Å—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º–≤–æ–ª –Ω—É–ª–µ–≤–æ–π –¥–ª–∏–Ω—ã Word Joiner, —á—Ç–æ–±—ã Telegram –¥–æ–±–∞–≤–∏–ª –Ω–µ–≤–∏–¥–∏–º—É—é —Å—Å—ã–ª–∫—É –∏ –ø–æ–¥–≥—Ä—É–∑–∏–ª –æ–±–ª–æ–∂–∫—É –¥–ª—è –Ω–µ–µ.

–û—Å—Ç–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –ø–æ–º–µ—Å—Ç–∏—Ç—å –µ–≥–æ –≤ —Å—Å—ã–ª–∫—É —Å –∑–∞–ø—Ä–æ—Å–æ–º. –£ –º–µ–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Å–∞–π—Ç–æ–º —É–∂–µ –∏–º–µ–µ—Ç Node.js, –ø–æ—ç—Ç–æ–º—É —è –∏—Å–ø–æ–ª—å–∑—É—é –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–∏. –ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç Node.js –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, —Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä `python` –∏–ª–∏ `perl` ‚Äî –ø–æ–ø—Ä–æ—Å–∏—Ç–µ ChatGPT –ø–æ–º–æ—á—å —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫–æ–¥–∞ –ø–æ–¥ –Ω–∏—Ö.
